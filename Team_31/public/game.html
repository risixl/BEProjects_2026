<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
    <link rel="stylesheet" href="css/header.css"/>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Peaceful Garden - Stress Relief Game</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.ripples/0.5.3/jquery.ripples.min.js"></script>

    <style>
        :root {
            --navy-blue: #05445e;
            --blue-grotto: #189ab4;
            --blue-green: #75e6da;
            --baby-blue: #d4f1f4;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--baby-blue);
            color: var(--navy-blue);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .wave-bg {
            position: fixed;
            width: 100%;
            height: 100%;
            z-index: -1;
            opacity: 0.3;
            background: linear-gradient(120deg, var(--blue-green) 0%, var(--baby-blue) 100%);
        }

        .wave-bg::before {
            content: "";
            position: absolute;
            width: 200%;
            height: 200%;
            top: -50%;
            left: -50%;
            background: radial-gradient(ellipse at center, transparent 0%, var(--baby-blue) 70%);
            animation: wave 15s infinite linear;
        }

        @keyframes wave {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .game-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(5, 68, 94, 0.1);
            margin-top: 20px;
            margin-bottom: 20px;
            position: relative;
            overflow: hidden;
        }

        .game-container::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(90deg, var(--blue-grotto), var(--blue-green));
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px 0;
        }

        .title {
            font-size: 2.5em;
            color: var(--navy-blue);
            margin-bottom: 10px;
            background: linear-gradient(90deg, var(--blue-grotto), var(--blue-green));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: none;
        }

        .subtitle {
            font-size: 1.1em;
            color: var(--navy-blue);
            margin-bottom: 15px;
            opacity: 0.8;
        }

        .breathing-guide {
            background: linear-gradient(135deg, var(--blue-grotto), var(--blue-green));
            color: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 30px;
            box-shadow: 0 8px 20px rgba(24, 154, 180, 0.3);
            position: relative;
            overflow: hidden;
        }

        .breathing-guide::after {
            content: "";
            position: absolute;
            bottom: 0;
            right: 0;
            width: 100px;
            height: 100px;
            background: radial-gradient(circle, rgba(255,255,255,0.2) 0%, transparent 70%);
            border-radius: 50%;
            transform: translate(30%, 30%);
        }

        .breathing-circle {
            width: 80px;
            height: 80px;
            border: 3px solid white;
            border-radius: 50%;
            margin: 15px auto;
            transition: transform 4s ease-in-out;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.3);
        }

        .breathing-circle.inhale {
            transform: scale(1.5);
        }

        .breathing-circle.exhale {
            transform: scale(1);
        }

        .activities {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .activity-card {
            background-color: white;
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            box-shadow: 0 4px 15px rgba(5, 68, 94, 0.08);
            position: relative;
            overflow: hidden;
        }

        .activity-card::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: linear-gradient(90deg, var(--blue-grotto), var(--blue-green));
        }

        .activity-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(5, 68, 94, 0.15);
            border-color: var(--blue-green);
        }

        .activity-icon {
            font-size: 2.5em;
            margin-bottom: 15px;
            display: block;
            background: linear-gradient(135deg, var(--blue-grotto), var(--blue-green));
            width: 60px;
            height: 60px;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 15px;
            color: white;
        }

        .activity-title {
            font-size: 1.3rem;
            font-weight: bold;
            color: var(--navy-blue);
            margin-bottom: 8px;
        }

        .activity-desc {
            font-size: 0.9em;
            color: var(--navy-blue);
            opacity: 0.7;
        }

        .color-palette {
            display: grid;
            grid-template-columns: repeat(8, 1fr);
            gap: 10px;
            margin: 20px 0;
            max-width: 400px;
            margin-left: auto;
            margin-right: auto;
        }

        .color-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 3px solid white;
            cursor: pointer;
            transition: transform 0.2s;
            box-shadow: 0 4px 10px rgba(5, 68, 94, 0.2);
        }

        .color-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 15px rgba(5, 68, 94, 0.3);
        }

        .canvas-container {
            background: white;
            border-radius: 15px;
            padding: 15px;
            box-shadow: inset 0 2px 8px rgba(5, 68, 94, 0.1);
            border: 2px solid var(--baby-blue);
        }

        #drawingCanvas {
            border: 1px solid var(--baby-blue);
            border-radius: 10px;
            cursor: crosshair;
            width: 100%;
            max-width: 600px;
        }

        .zen-garden {
            background-image:  url(https://media.istockphoto.com/id/1300107681/photo/surface-of-the-atlantic-ocean.jpg?s=612x612&w=0&k=20&c=w_5KDlGHRBKgLzjyA6KrdFHDlrO4B2M4LtflWAyzGhc=);
            background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    border-radius: 15px;
            height: 500px;
            position: relative;
            overflow: hidden;
            cursor: pointer;
            border: 2px solid var(--blue-green);
            box-shadow: inset 0 2px 10px rgba(5, 68, 94, 0.1);
        }

        

        .positive-message {
            background: linear-gradient(135deg, var(--blue-grotto), var(--blue-green));
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            margin-top: 20px;
            font-size: 1.1em;
            box-shadow: 0 8px 20px rgba(24, 154, 180, 0.3);
            position: relative;
            overflow: hidden;
        }

        .positive-message::after {
            content: "";
            position: absolute;
            bottom: 0;
            right: 0;
            width: 80px;
            height: 80px;
            background: radial-gradient(circle, rgba(255,255,255,0.2) 0%, transparent 70%);
            border-radius: 50%;
            transform: translate(20%, 20%);
        }

        .hidden {
            display: none;
        }

        .floating-hearts {
            position: absolute;
            pointer-events: none;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        .heart {
            position: absolute;
            color: var(--blue-grotto);
            font-size: 20px;
            animation: float-up 3s ease-out forwards;
        }

        @keyframes float-up {
            0% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
            100% {
                opacity: 0;
                transform: translateY(-100px) scale(1.5);
            }
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            background: rgba(117, 230, 218, 0.1);
            padding: 20px;
            border-radius: 15px;
            margin-top: 20px;
            border: 1px solid var(--blue-green);
        }

        .stat-item {
            text-align: center;
            padding: 15px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(5, 68, 94, 0.08);
        }

        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: var(--blue-grotto);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9em;
            color: var(--navy-blue);
            opacity: 0.8;
        }

        .activity-section {
            margin-top: 30px;
            padding: 25px;
            background: rgba(117, 230, 218, 0.1);
            border-radius: 15px;
            border: 1px solid var(--blue-green);
        }

        .activity-section h3 {
            color: var(--navy-blue);
            margin-bottom: 20px;
            font-size: 1.5em;
            text-align: center;
        }

        .cta-button {
            display: inline-block;
            background: linear-gradient(90deg, var(--blue-grotto), var(--blue-green));
            color: white;
            padding: 12px 25px;
            border-radius: 25px;
            text-decoration: none;
            font-weight: bold;
            margin-top: 15px;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
            font-size: 1em;
        }

        .cta-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(24, 154, 180, 0.4);
        }

        .zen-garden-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: var(--navy-blue);
            font-size: 1.2em;
            opacity: 0.7;
            pointer-events: none;
        }

        @media (max-width: 768px) {
            .activities {
                grid-template-columns: 1fr;
            }
            
            .stats {
                grid-template-columns: 1fr;
            }
            
            .title {
                font-size: 2em;
            }
            
            .game-container {
                margin: 10px;
                padding: 15px;
            }
        }
        /* Mini-games styles */
        .mini-game { background: white; border-radius: 12px; padding: 18px; box-shadow: 0 6px 18px rgba(5,68,94,0.06); }
        .card-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; }
        .card { background: linear-gradient(90deg,var(--baby-blue),#fff); border-radius: 10px; height: 80px; display:flex;align-items:center;justify-content:center;font-size:1.6rem; cursor:pointer; user-select:none; }
        @media (max-width:768px){ .card-grid { grid-template-columns: repeat(2,1fr); } }
        .bubble { position:absolute; border-radius:50%; background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.9), rgba(255,255,255,0.2)); cursor:pointer; box-shadow: 0 6px 14px rgba(5,68,94,0.08); }
    header {
    background: var(--navy-blue);
    padding: 15px 0;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.container.header-content {
    max-width: 1200px;
    margin: 0 auto;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0 20px;
}

.logo {
    display: flex;
    align-items: center;
    color: white;
    font-size: 1.5em;
    font-weight: bold;
}

/* Small fixed logo and header layout adjustments */
.logo-img {
    height: 44px;
    max-height: 50px;
    width: auto;
    object-fit: contain;
    margin-right: 10px;
}

header { display: block; }
.container.header-content { display: flex; align-items: center; gap: 12px; }
nav { flex: 1 1 auto; }
nav ul { justify-content: flex-start; align-items: center; }

.logo-icon {
    margin-right: 10px;
}

nav ul {
    list-style: none;
    display: flex;
    gap: 20px;
}

nav ul li a {
    color: white;
    text-decoration: none;
    font-weight: bold;
    padding: 8px 12px;
    border-radius: 5px;
    transition: background 0.3s;
}

nav ul li a:hover,
nav ul li a.active {
    background: var(--blue-grotto);
}

    </style>
</head>
<body>
    <div class="wave-bg"></div>

    <header>
      <div class="container header-content">
                <div class="logo">
                    <img src="https://i.ibb.co/ksr38h61/Mindful-Logo.png" alt="Mindful AI Logo" class="logo-img">
                    <div class="logo-text">Mindful AI</div>
                </div>

        <nav>
          <ul>
            <li><a href="dashboard.html" class="active"><i class="fas fa-cog"></i> Dashboard</a></li>
            <li><a href="articles.html"><i class="fas fa-book"></i> Resources</a></li>
            <li><a href="community.html"><i class="fas fa-comments"></i> Community</a></li>
            <li><a href="#"><i class="fas fa-chart-line"></i> Progress</a></li>
          </ul>
        </nav>
      </div>
    </header>

    
    <div class="game-container">
        <div class="header">
            <h1 class="title">ðŸŒŠ Ocean of Peace ðŸŒŠ</h1>
            <p class="subtitle">Find tranquility in the depths of calm</p>
        </div>

        <div class="breathing-guide">
            <h3>Deep Ocean Breathing</h3>
            <div class="breathing-circle" id="breathingCircle">
                <span id="breathingText">Breathe</span>
            </div>
            <p id="breathingInstruction">Click the circle to begin your journey to calm</p>
        </div>

        <div class="activities">
            <div class="activity-card" onclick="showDrawing()">
                <div class="activity-icon">ðŸŽ¨</div>
                <div class="activity-title">Flow Art</div>
                <div class="activity-desc">Let creativity flow like ocean waves</div>
            </div>

            <div class="activity-card" onclick="showZenGarden()">
                <div class="activity-icon"></div>
                <li>
  <button id="audio-btn-inline" style="
  background: none;
  border: none;
  color: white;
  font-size: 20px;
  cursor: pointer;
  transition: transform 0.2s;
" title="Play Audio">
  ðŸ”Š
</button>

<audio id="nav-audio-inline" preload="auto">
  <source src="Sound Bath in the Forest âœ¦ A=432Hz âœ¦ A Serene Forest Bath Accompanied by Gentle Ambient Tones.mp3" type="audio/mpeg">
  Your browser does not support the audio element.
</audio>

<script>
  (function () {
    const audioBtn = document.getElementById('audio-btn-inline');
    const audio = document.getElementById('nav-audio-inline');
    let isPlaying = false;

    audioBtn?.addEventListener('click', () => {
      if (!isPlaying) {
        audio.play().then(() => {
          isPlaying = true;
          audioBtn.textContent = 'â¸ï¸';
        }).catch(err => {
          console.error('Audio play failed:', err);
        });
      } else {
        audio.pause();
        isPlaying = false;
        audioBtn.textContent = 'ðŸ”Š';
      }
    });

    audio?.addEventListener('ended', () => {
      isPlaying = false;
      audioBtn.textContent = 'ðŸ”Š';
    });
  })();
</script>
</li>
                <div class="activity-title">Ripple Garden</div>
                <div class="activity-desc">Create peaceful ripples in your mind</div>
            </div>

            <div class="activity-card" onclick="showAffirmations()">
                <div class="activity-icon">ðŸ’™</div>
                <div class="activity-title">Ocean Wisdom</div>
                <div class="activity-desc">Gentle waves of encouragement</div>
            </div>

            <div class="activity-card" onclick="showStats()">
                <div class="activity-icon">ðŸ“Š</div>
                <div class="activity-title">Your Journey</div>
                <div class="activity-desc">Track your path to peace</div>
            </div>
            <!-- Mini-games: Bubble Pop, Reaction Test, Memory Match -->
            <div class="activity-card" onclick="showBubblePop()">
                <div class="activity-icon">ðŸ’¥</div>
                <div class="activity-title">Bubble Pop</div>
                <div class="activity-desc">Pop as many bubbles as you can</div>
            </div>

            <div class="activity-card" onclick="showReactionTest()">
                <div class="activity-icon">âš¡</div>
                <div class="activity-title">Reaction Test</div>
                <div class="activity-desc">Measure your reaction time</div>
            </div>

            <div class="activity-card" onclick="showMemoryMatch()">
                <div class="activity-icon">ðŸ§ </div>
                <div class="activity-title">Memory Match</div>
                <div class="activity-desc">Find matching pairs</div>
            </div>
        </div>

        <!-- Drawing Activity -->
        <div id="drawingActivity" class="activity-section hidden">
            <h3>ðŸŽ¨ Flow Art - Express Your Inner Ocean</h3>
            <div class="color-palette">
                <div class="color-btn" style="background: var(--navy-blue)" onclick="setColor('#05445e')"></div>
                <div class="color-btn" style="background: var(--blue-grotto)" onclick="setColor('#189ab4')"></div>
                <div class="color-btn" style="background: var(--blue-green)" onclick="setColor('#75e6da')"></div>
                <div class="color-btn" style="background: var(--baby-blue)" onclick="setColor('#d4f1f4')"></div>
                <div class="color-btn" style="background: #4ecdc4" onclick="setColor('#4ecdc4')"></div>
                <div class="color-btn" style="background: #45b7d1" onclick="setColor('#45b7d1')"></div>
                <div class="color-btn" style="background: #00d2d3" onclick="setColor('#00d2d3')"></div>
                <div class="color-btn" style="background: #54a0ff" onclick="setColor('#54a0ff')"></div>
            </div>
            <div class="canvas-container">
                <canvas id="drawingCanvas" width="600" height="300"></canvas>
            </div>
            <button class="cta-button" onclick="clearCanvas()">Clear Waters</button>
        </div>

        <!-- Zen Garden Activity -->
        <div id="zenActivity" class="activity-section hidden">
            <h3>ðŸŒŠ Ripple Garden - Touch the Surface of Serenity</h3>
            <div class="zen-garden" id="zenGarden" onclick="createRipple(event)">
                <div class="zen-garden-text">
                    Click to create ripples of peace ðŸŒŠ
                </div>
            </div>
        </div>

        <!-- Mini-games containers -->
        <div id="bubblePop" class="activity-section hidden mini-game">
            <h3>ðŸ«§ Bubble Pop</h3>
            <div style="display:flex;gap:12px;align-items:center;margin-bottom:12px;">
                <button class="cta-button" id="startBubbleBtn">Start (20s)</button>
                <div>Score: <span id="bubbleScore">0</span></div>
                <div>Time left: <span id="bubbleTime">20</span>s</div>
            </div>
            <div id="bubbleArea" style="position:relative;height:320px;border-radius:12px;border:2px dashed var(--baby-blue);background:linear-gradient(180deg,var(--white),var(--baby-blue));overflow:hidden"></div>
        </div>

        <div id="reactionTest" class="activity-section hidden mini-game">
            <h3>âš¡ Reaction Time Test</h3>
            <div id="reactionBox" style="height:180px;border-radius:12px;display:flex;align-items:center;justify-content:center;background:var(--baby-blue);font-size:1.6rem;">Click Start to begin</div>
            <div style="margin-top:12px;display:flex;gap:12px;align-items:center;">
                <button class="cta-button" id="startReactionBtn">Start</button>
                <div>Last: <span id="reactionLast">-</span> ms</div>
            </div>
        </div>

        <div id="memoryMatch" class="activity-section hidden mini-game">
            <h3>ðŸ§© Memory Match</h3>
            <div style="margin-bottom:12px;">Tries: <span id="memoryTries">0</span> â€” Matches: <span id="memoryMatches">0</span></div>
            <div id="cardGrid" class="card-grid"></div>
            <div style="margin-top:12px;"><button class="cta-button" id="resetMemoryBtn">Reset</button></div>
        </div>

        <!-- Stats -->
        <div class="stats" id="statsDisplay">
            <div class="stat-item">
                <div class="stat-number" id="breathingCount">0</div>
                <div class="stat-label">Deep Breaths</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="drawingStrokes">0</div>
                <div class="stat-label">Creative Strokes</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="rippleCount">0</div>
                <div class="stat-label">Peaceful Ripples</div>
            </div>
        </div>

        <div class="positive-message" id="positiveMessage">
            Like the ocean's endless calm, your peace runs deep within you ðŸ’™
        </div>

        <div class="floating-hearts" id="floatingHearts"></div>
    </div>

    <script>
        let breathingActive = false;
        let currentColor = '#189ab4';
        let isDrawing = false;
        let canvas, ctx;
        
        // Stats
        let stats = {
            breaths: 0,
            strokes: 0,
            ripples: 0
        };

        const oceanAffirmations = [
            "You are as vast and powerful as the ocean ðŸŒŠ",
            "Like waves returning to shore, peace will return to you ðŸ’™",
            "Your depths hold infinite strength and wisdom ðŸš",
            "Every breath connects you to the rhythm of the sea ðŸŒŠ",
            "You flow with grace through life's changing tides ðŸ’«",
            "Your calm runs deeper than any storm above â­",
            "Like the ocean, you are both gentle and mighty ðŸŒŠ",
            "Peace washes over you with each passing moment ðŸ’™",
            "You are the calm in your own storm ðŸ•Šï¸",
            "Your serenity touches all those around you ðŸŒŠ"
        ];

        // Initialize canvas
        function initCanvas() {
            canvas = document.getElementById('drawingCanvas');
            ctx = canvas.getContext('2d');
            ctx.lineCap = 'round';
            ctx.lineWidth = 4;
            
            canvas.addEventListener('mousedown', startDrawing);
            canvas.addEventListener('mousemove', draw);
            canvas.addEventListener('mouseup', stopDrawing);
            canvas.addEventListener('mouseout', stopDrawing);
        }

        // Breathing exercise
        document.getElementById('breathingCircle').onclick = function() {
            if (!breathingActive) {
                startBreathing();
            }
        };

        function startBreathing() {
            breathingActive = true;
            const circle = document.getElementById('breathingCircle');
            const text = document.getElementById('breathingText');
            const instruction = document.getElementById('breathingInstruction');
            
            function breatheCycle() {
                if (!breathingActive) return;
                
                // Inhale
                text.textContent = 'In';
                instruction.textContent = 'Breathe in like the tide coming in...';
                circle.classList.add('inhale');
                circle.classList.remove('exhale');
                
                setTimeout(() => {
                    if (!breathingActive) return;
                    // Exhale
                    text.textContent = 'Out';
                    instruction.textContent = 'Breathe out like waves flowing back to sea...';
                    circle.classList.add('exhale');
                    circle.classList.remove('inhale');
                    stats.breaths++;
                    updateStats();
                    
                    setTimeout(breatheCycle, 4000);
                }, 4000);
            }
            
            breatheCycle();
        }

        // Drawing functions
        function setColor(color) {
            currentColor = color;
        }

        function startDrawing(e) {
            isDrawing = true;
            ctx.beginPath();
            ctx.strokeStyle = currentColor;
            const rect = canvas.getBoundingClientRect();
            ctx.moveTo(e.clientX - rect.left, e.clientY - rect.top);
        }

        function draw(e) {
            if (!isDrawing) return;
            const rect = canvas.getBoundingClientRect();
            ctx.lineTo(e.clientX - rect.left, e.clientY - rect.top);
            ctx.stroke();
            stats.strokes++;
            updateStats();
        }

        function stopDrawing() {
            isDrawing = false;
        }

        function clearCanvas() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        }

        // Zen garden ripples
        function createRipple(e) {
    const $garden = $('#zenGarden');
    if (!$garden.data('ripples-initialized')) {
        $garden.ripples({
            resolution: 512,
            dropRadius: 20,
            perturbance: 0.04
        });
        $garden.data('ripples-initialized', true);
    }
    
}

        // Activity switching
        function hideAllActivities() {
            document.getElementById('drawingActivity').classList.add('hidden');
            document.getElementById('zenActivity').classList.add('hidden');
        }

        function showDrawing() {
            hideAllActivities();
            document.getElementById('drawingActivity').classList.remove('hidden');
            if (!canvas) initCanvas();
        }

        function showZenGarden() {
            hideAllActivities();
            document.getElementById('zenActivity').classList.remove('hidden');
        }

        function showAffirmations() {
            hideAllActivities();
            const message = oceanAffirmations[Math.floor(Math.random() * oceanAffirmations.length)];
            document.getElementById('positiveMessage').textContent = message;
            
            // Add floating heart
            createFloatingHeart();
        }

        function showStats() {
            hideAllActivities();
            // Stats are always visible, just highlight them
            document.getElementById('statsDisplay').style.animation = 'pulse 1s ease-in-out';
            setTimeout(() => {
                document.getElementById('statsDisplay').style.animation = '';
            }, 1000);
        }

        function createFloatingHeart() {
            const heartsContainer = document.getElementById('floatingHearts');
            const heart = document.createElement('div');
            heart.classList.add('heart');
            heart.textContent = 'ðŸ’™';
            heart.style.left = Math.random() * 80 + '%';
            heart.style.top = '90%';
            
            heartsContainer.appendChild(heart);
            
            setTimeout(() => {
                heart.remove();
            }, 3000);
        }

        function updateStats() {
            document.getElementById('breathingCount').textContent = stats.breaths;
            document.getElementById('drawingStrokes').textContent = stats.strokes;
            document.getElementById('rippleCount').textContent = stats.ripples;
        }

        // Random positive messages
        setInterval(() => {
            if (Math.random() < 0.3) { // 30% chance every 15 seconds
                const message = oceanAffirmations[Math.floor(Math.random() * oceanAffirmations.length)];
                document.getElementById('positiveMessage').textContent = message;
            }
        }, 15000);

        // Initialize
        window.onload = function() {
            updateStats();
        };
    </script>
        <!-- Mini-games script -->
        <script>
        // Helpers to hide all activities and show one
        function hideAllActivities() {
                document.getElementById('drawingActivity')?.classList.add('hidden');
                document.getElementById('zenActivity')?.classList.add('hidden');
                document.getElementById('drawingActivity')?.classList.add('hidden');
                document.getElementById('bubblePop')?.classList.add('hidden');
                document.getElementById('reactionTest')?.classList.add('hidden');
                document.getElementById('memoryMatch')?.classList.add('hidden');
                // keep stats visible area as it is
        }

        // Show Bubble Pop
        function showBubblePop(){ hideAllActivities(); document.getElementById('bubblePop').classList.remove('hidden'); }
        // Show Reaction Test
        function showReactionTest(){ hideAllActivities(); document.getElementById('reactionTest').classList.remove('hidden'); }
        // Show Memory Match
        function showMemoryMatch(){ hideAllActivities(); document.getElementById('memoryMatch').classList.remove('hidden'); }

        // Bubble Pop game
        (function(){
            const area = document.getElementById('bubbleArea');
            const startBtn = document.getElementById('startBubbleBtn');
            const scoreEl = document.getElementById('bubbleScore');
            const timeEl = document.getElementById('bubbleTime');
            let timer = null, timeLeft = 20, score = 0, spawnInterval;

            function spawnBubble(){
                if(!area) return;
                const b = document.createElement('div');
                const size = 30 + Math.random()*60;
                b.className = 'bubble';
                b.style.width = size + 'px';
                b.style.height = size + 'px';
                b.style.left = Math.random()*(area.clientWidth - size) + 'px';
                b.style.top = Math.random()*(area.clientHeight - size) + 'px';
                b.style.opacity = 0.9;
                area.appendChild(b);
                b.addEventListener('click', function(){ score++; scoreEl.textContent = score; b.remove(); });
                // slowly fade and remove
                setTimeout(()=>{ b.remove(); }, 5000);
            }

            function startRound(){
                if(!area) return;
                score = 0; timeLeft = 20; scoreEl.textContent = score; timeEl.textContent = timeLeft;
                spawnInterval = setInterval(spawnBubble, 600);
                timer = setInterval(()=>{
                    timeLeft--; timeEl.textContent = timeLeft;
                    if(timeLeft<=0){ clearInterval(timer); clearInterval(spawnInterval); timer=null; spawnInterval=null; }
                },1000);
            }

            startBtn?.addEventListener('click', startRound);
        })();

        // Reaction Time game
        (function(){
            const box = document.getElementById('reactionBox');
            const start = document.getElementById('startReactionBtn');
            const last = document.getElementById('reactionLast');
            let waiting = false; let startTime=0;

            start?.addEventListener('click', ()=>{
                if(!box) return;
                box.textContent = 'Get ready...'; box.style.background = 'var(--baby-blue)';
                waiting = true; last.textContent = '-';
                const delay = 1000 + Math.random()*3000;
                setTimeout(()=>{
                    if(!waiting) return;
                    box.textContent = 'CLICK!'; box.style.background = 'linear-gradient(90deg,var(--blue-grotto),var(--blue-green))';
                    startTime = performance.now();
                    // one-time click
                    function onClick(){
                        const rt = Math.round(performance.now() - startTime);
                        last.textContent = rt;
                        waiting = false; box.textContent = 'Click Start to begin'; box.style.background = 'var(--baby-blue)';
                        box.removeEventListener('click', onClick);
                    }
                    box.addEventListener('click', onClick);
                }, delay);
            });
        })();

        // Memory Match
        (function(){
            const grid = document.getElementById('cardGrid');
            const triesEl = document.getElementById('memoryTries');
            const matchesEl = document.getElementById('memoryMatches');
            const resetBtn = document.getElementById('resetMemoryBtn');
            let first=null, second=null, lock=false, tries=0, matches=0;

            function shuffle(a){ for(let i=a.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [a[i],a[j]]=[a[j],a[i]];} return a; }

            function build(){
                if(!grid) return;
                grid.innerHTML=''; tries=0; matches=0; triesEl.textContent=tries; matchesEl.textContent=matches;
                const vals = ['ðŸƒ','ðŸŒŠ','ðŸŒŸ'];
                const cards = shuffle(vals.concat(vals));
                cards.forEach((v,i)=>{
                    const d = document.createElement('div'); d.className='card'; d.dataset.value = v; d.textContent = '';
                    d.addEventListener('click', ()=>{ if(lock || d.classList.contains('matched') || d===first) return; reveal(d); });
                    grid.appendChild(d);
                });
            }

            function reveal(card){
                card.textContent = card.dataset.value; card.style.transform = 'scale(1.03)';
                if(!first) { first = card; return; }
                second = card; lock=true; tries++; triesEl.textContent = tries;
                if(first.dataset.value === second.dataset.value){
                    first.classList.add('matched'); second.classList.add('matched'); matches++; matchesEl.textContent = matches; resetTurn();
                } else {
                    setTimeout(()=>{ first.textContent=''; second.textContent=''; resetTurn(); }, 800);
                }
            }

            function resetTurn(){ first=null; second=null; lock=false; }

            resetBtn?.addEventListener('click', build);
            // build on load so it's ready
            build();
        })();

        // Expose show functions to onclick handlers
        window.showBubblePop = showBubblePop;
        window.showReactionTest = showReactionTest;
        window.showMemoryMatch = showMemoryMatch;
        </script>
</body>
</html>